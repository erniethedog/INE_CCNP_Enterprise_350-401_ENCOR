======================================================================
Open Shortest Path First (OSPF) Protocol & Operation Overview

Resources:
- OSPF: Anatomu of an Internet Routing Protocol
- Routing TCP/IP Volume 1
- Cisco IP Routing: Packet Forwarding and Intra-domain Routing Protocols

Standards:
- RFC 2328
  > OSPF Version 2 
  > for IPv4
- RFC 5340
  > OSPF for both IPv4 and IPv6
  
Technology Documentation
- Cisco > Technology > IP > IP Routing > OSPF
- OSPF Configuration Guides

What is OSPF?
- RFC 2328
  > OSPF Version 2 
  > for IPv4
- RFC 5340
  > OSPF Version 3
  > OSPF for both IPv4 and IPv6
  > Multi-AF support for v3
- Link-State Protocol
  > Uses Dijkstra SPF Algorithm
- Classless
  > Supports VLSM and Summarization
  
Why USE OSPF
- Guarantees a Loop-Free Topology
  > All routes agree on overall topology
    - All routers on the same area has the same view of the topology
  > Uses Dijkstra SPF Algorithm for calculation
    - Input: LSA Database (in the area)
    - Output: Shortest Path Tree; used for routing
- Standards based
  > Inter-operability between vendors
- Large Scalability
  > Hierarchy through 'areas'
    - 2 level heirarchy
  > Topology summarization
- Fast Convergence
  > Actively tracks neighbor adjacencies
    - "hello"
  > Event driven incremental updates
  > Subsecond convergence when configured properly
- Efficient Updating
  > Uses reliable multicast and unicast updates
  > Non-OSPF devices do not need to process updates
- Bandwidth Based Cost Metric
  > More flexible than static hop count
- Control Plane Security
  > Supports multiple forms of authentication
    - eg. Clear Test, MD5, SHA, IP Sec, etc
- Extensible
  > Future application support through "opaque" LSA
    - eg. MPLS Traffic Engineering
  > unlike EIGRP which is "closed" standard even though it has an informational standard
  
  
HOW OSPF WORKS
1. Discover OSPF Neighbors and Exchange Topology
2. Choose best path via SPF
  Input: LSA Database (in the area)
  Process by SPF Algo
  Output: Shortest Path Tree
3. Neighbor and Topology Table Maintenance

Step 1 - Neighbor and Topology Discovery
- like EIGRP, OSPF uses "hello" packets to discover neighbors on OSPF enabled attached links
  > Transport via IP protocol 89 (OSPF). Not using TCP/IP transport
  > Sent as multicast to 224.0.0.5 or 224.0.0.6, or unicast
- Hello packet contain attributes that neighbors must agree on to form "adjacency"
  > Once adjacency is negotiated, LSDB is exchanged
    - Some devices will form neighbor relationships but NOT adjacencies
    - Devices that form adjacency will form neighbor relationships
  
Negotiating OSPF Adjancies
- OSPF adjacency occurs when connected neighbors use hello packets to agree on unique and commn attributes
  > Not all OSPF neighbors actually form adjacency
  > Most OSPF configuration problems happen at this stage
    - like MTU mismatch, wrong authentication, or Layer 2 errors
    
Unique OSPF Adjacency Attributes
- Router-ID
  > Node ID in the Link State Graph
    - BGP is used to do destination routing. OSPF is used to route packets between nodes in the graph
    - OSPF is making decision based on the node identifier in the graph, which is the Router-ID
  > Chosen based upon:
    - Manual Configuration (Recommended)
    - Highest active Loopback IP
    - Highest active Interface IP
  > must be unique on the whole OSPF topology. not just in one area
- Interface IP Address
  > For OSPFv2, the interface' primary IP Address
  > For OSPFv3, the interface' link-local address
    - This is unique on IPv6 because of Duplicate Address Detection (DAD)

Common OSPF Adjacency Attributes
- Interface Area ID
- Hello interval and Dead interval
- Interface network address
- Interface MTU
  > eg. jumbo MTU on GigE
- Network Type
- Authentication
- Stub Flags
- Other optional capabilities

OSPF Hello Packets
- OSPF routers periodically send hello packets out to OSPF enabled links everyt Hello interval
- Hello packet contains
  > Local Router ID
  > Local Area ID
  > Local Interface Subnet Mask
  > Local Interface Priority
  > Hello interval
  > Dead interval
  > Authentication Type and Password
  > DR/BDR Addresses
  > Options (eg. stub flags, etc)
  > Router IDS of other neighbor on the link

OSPF Adjacency State Machine
- OSPF adjacency process uses 8 states to determine progress of adjacency establishment
  1. Down
    - No hellos have been received from neighbor
  2. Attempt
    - UNICAST HELLO packet has been sent to neighbor, but no hello has been received back
    - Only used for manually configured NBMA neighbors
    - If OSPF is running on Frame Relay (non-broadcast network type) or DMVPN (non-broadcast network type), state changes from DOWN TO ATTEMPT  
  2. Init
    - MULTICAST HELLO
    - Have received a hello packet from a neighbor, but they have not acknowledged a hello from me
    - If OSPF is running on Ethernet, state changes from DOWN to INIT (not just Ethernet, any other network types which is non broadcast goes to INIT after DOWN)
		- Stuck here = transport problem. check protocol filtering on ACL as well
  3. 2-Way
    -  I have received a hello packet from a neighbor and they have acknowledged a hello from me
      > indicated by my Router-ID in the neighbor's hello packet
    - If state does NOT go to 2-Way state, there must be something wrong in the Layer 2 transport network
      > OSPF is filtered 1 way
      > Multicast is not supported
      > some sort of any Layer 1 issue
  4. ExStart (Exchange Start)
    - First Step of actual adjacency. Negotiate attributes for adjacency
    - If stuck at this state, debug will show the issue. OR do a stare and compare on the attributes
    - Master and Slave Relationship is formed (Master has higher Router-ID)
    - Master chooses the starting sequence number for the DBD (Database Descriptor) packets that are used for actual LSA exchange
    - basically used for collisions (messages sent at the same time)  
  5. Exchange
    - Local link state database is sent through DBD packets
    - DBD sequence number is used for reliable acknowledgement/retransmission
  6. Loading
    - Link State Request packets are sent to ask for more information about a PARTICULAR LSA (not the whole Database)
    - Distance vector is routing based on destination prefixes. Link state is routing based on the nodes in the graph
  7. Full
    - Neighbors are fully adjacent and databases are synchronized
    - SPF can now be run

Step 2 - Choose Best Path via SPF
- Once the databases are synchronized, path selection begins
- Each router's LSA include a "cost" attribute for each described link
  > Best Path to that link is lowest end-to-end cost
  > Multiple Equal Cost Paths are allowed (ECMP)
- There exists an issue with OLD OSPF code and NEW OSPF
  > need to tell OSPF to account for high speed links
    - eg. GigE, TenGigE, HundredGigE, FortyGigE
- Cisco's implementation uses Bandwidth based cost, but per RFC, it is arbitrary
  > Default Cisco Cost = 100 Mbps / Link Bandwidth
  > Reference BW can be modified to accommodate higher speed links (eg. GigE, TenGigE, HundredGigE, FortyGigE)
  > As long as peer routers agree on the cost, traffic will be routed
  
Step 3 - Neighbor and Topology Maintenance
- Once adjacencies established and SPT built, OSPF State machine tracks neighbor and topology changes
  > Hello packets used to track neighbor changes
  > LSA fields used to track topology changes

Tracking Neighbor Changes
- Hello Interval
  > 10 or 30 seconds by default depending on interface type
- Dead Interval
  > defaults to 4 x Hello interval
  > can be as low as 1 second for faster convergence
- BFD can also be used to for faster convergence
- When a new LSA is received, it is checked against the database for changes such as:
  > Sequence number
    - higher seq number means newer copy of LSA
    - there are instances when the LSA has higher seq number but nothing has changed
  > Age
    - Used  to keep information new and withdraw old information
    - Periodic flooding occurs after 30 mins
      > "paranoid" update
    - LSA that reach MaxAge (60 mins) are withdrawn
    - MaxAge is used to poison routes (make routes disappear on the update)
  > Checksum
    - Used to avoid transmission and memory corruption

LSA Flooding
- When change is detected, new LSA is generated and flooded out all links
  > OSPF does not use split horizon
  > Self-originated LSAs are simply dropped
- Not all LSA changes require SPF to recalculate
  > eg. link up/down event vs seq number change
  > See RFC 2328 "13. The Flooding Procedure" for details

Note: OSPF behaves as a distance vector for Inter-Area Routing

======================================================================

OSPF Single Area Configuration

Configuring Basic OSPF
Verifying OSPF Adjacencies
Verifying OSPF Database


OSPF Prerequisites
- IP Routing must be enabled
  > eg. "ip routing" command
- Must be an up/up interface running IP
  > used for OSPF Router-ID when OSPF starts
  > not an IP address. just a 32 bit number inherited from IP address
  
Enabling OSPF
- Enable global OSPF process
  > router ospf [process-id]
    - process-id is locally significant
    - Exception is MPLS L3VPN
- Enable interface OSPF process
  > process level
    - network [address] [wildcard] area [area-id]
  > interface level
    - ip ospf [process-id] area [area-id]
  > both are esentially enabling the ospf process
  > like in EIGRP, there is a key distinction between the network statement and what is actually being advertised
    - example, when you issue a /8 in network statement, it doesnt necessarily mean that you are advertising the /8 prefix
    - you are advertising the SUBNET MASK of the INTERFACE in which the OSPF is actually configured on
  
OSPF Network Statement
- useful for ENABLING OSPF on multiple interfaces at the same time
  > wildcard mask does not relate to subnet mask
- Most specific match determines the area
  > network 0.0.0.0 255.255.255.255 area 0
  > network 1.0.0.0 0.255.255.255 area 1
  > network 1.2.0.0 0.0.255.255 area 2
  > network 1.2.3.0 0.0.0.255 area 3
  > network 1.2.3.4 0.0.0.0 area 4
- better to check the area an interface belongs by using
  > show ip ospf interface [brief]


OSPF Interface Statement
- Enables OSPF on the primary address and secondary IP addresses at the same time
  > Secondary advertisement can be disabled
  > not disbaled by default
- OSPF stays enabled even if IP address changes
  

OSPF Verification
- Verify OSPF is enabled
  > show ip ospf
  > show ip ospf interface [brief]
- Verify OSPF adjacencies
  > show ip ospf neighbor
  > debug ip ospf adjacency
- Verify OSPF database
  > show ip ospf database [router|network|summary|...]

Configuration
conf t
router ospf 1
  network 155.1.0.0 0.0.255.255 area 0
  auto-cost reference-bandwidth 100000 <----------------change reference BW to 100G, default is 100M
end

-show ip ospf brief
  > F/C = Full Adjacencies / Total Neighbors

- show ip ospf database
  > LSA1 Router LSA
    - describes how we route to the node in the graph
    - attribute of the links the Node owns
    - originated by all routers in the area
  > LSA2 - Network LSA
    - originated by the Designated Router (there is DR for each broadcast network)
    - describe who the other nodes on the particular segment


Designated Router
Backup BR
DR Other

Example:
- On a segment shared by 5 routers
  > 1 DR
		- Adjacent with the other 4
	> 1 BDR
		- Adjacent with the other 4
	> 3 DR Other
		- DR Other router will be adjacent with BR and BDR only
		- DR Other router will form neighbor relationship with the rest of the routers
- OSPF runs as NETWORK TYPE BROADCAST by default on a shared LAN segment (NOT ADVISABLE to run as default on P2P links)
	> command below to change the default behaviour to P2P
		conf t
		int <INT_NAME>
			ip ospf network point-to-point
- DR's role is to shorten the Shortest Path Tree calculation
	> think of this as a switch with a star topology
	> You dont want to make a calculation 5 times (5 routers on the segment)
	> Calculation will just be based on the DR's perspective, since the rest of the router on the segment is connected to the DR anyway
	> This is to lessen work on the CPE. Not really needed on today's network as CPUs are now powerful
	> This is an issue on the old Routers


======================================================================
Troubleshooting OSPF Adjacencies

Understanding OSPF State Machine
Interpreting show commands
Interpreting debug commands


Where problem arise?
- Transport Problems
- Attribute negotiation problems

Useful Commands
- show ip ospf neighbor
	> better to also check the database. Adjacency might form between neighbors but no routes will be installed
		- this happens if the ospf attribute/s are mismatched
- show ip ospf database
- show ip ospf database router [ROUTER_ID]
	> Check for "Adv Router is not-reachable in topology"
		- means routing bit is NOT SET. Router ID is unreachable
- debug ip ospf adj
- debug ip packet
	> use with caution
	
Normal OSPF Adjacency State Machine Order
- Down/Attempt
- Init
- 2-Way
	> Stop here for DROthers
	> If you dont get to 2-way, there is a transport problem
		- DMVPN wrong mapping
		- VLAN ACL dropping OSPF
		- Layer 1 issues
		- etc
- ExStart
- Exchange
- Loading
- Full

OSPF Adjacency Attributes
- Unique OSPF Adj Attributes
	> Router-ID
	> Interface IP Address
- Common OSPF Adjacency Attributes
	> Interface Area-ID
	> Hello Interval and Dead Interval
	> Interface network address
	> Interface MTU
		- best practice is NOT TO IGNORE MTU checks
	> Network Type
		- defaults to Broadcast
	> Authentication
	> Stub Flags
	> Other optional capabilities

======================================================================
OSPF Areas and LSAs


- Scaling OSPF with Areas
- OSPF LSA Types
- OSPF Path Selection
	> Intra-Area
	> Inter-Area
	> External

Overview
- Areas add heirarchy and scalability to OSPF
- An area defines a flooding domain
	> All devices in the area agree on the topology
	> Changes inside the area require LSA flooding and full SPF algo run
- Routing between areas hides topology details
	> Inter-area routing is similar to distance vector
	> Changes outside the area dont always require LSA flooding or SPF run
	> Limits impacts on router resources

OSPF Two-Level Heirarchy
- Backbone Area
	> Area 0 (0.0.0.0)
	> Used to summarize topology (NOT TO BE CONFUSED WITH NLRI SUMMARIZATION) information between other areas
		- LSA type 3. Network summary
	> Traffic from one area to another must pass through area 0
	> Must be contiguous
		- all other areas are connected to area 0
		- area 0 is in the middle. other areas are outside
- Non-Backbone Area
	> All other areas except Area 0. Range is 1 to 2^32 (0.0.0.1 - 255.255.255.255)
	> Must use connections to area 0 to reach other areas


OSPF Router Types
- Backbone Routers
	> At least one link in Area 0
- Internal Routers
	> All links in one non-backbone area
- Area Border Router (ABR)
	> Links in both area 0 and in non-backbone area(s)
	> Used to summarize information between area 0 and non-backbone area
- Autonomous System Boundary Router (ASBR)
	> At least one link in OSPF domain
	> At least one link outside OSPF domain
		- EIGRP, IS-IS, BGP, etc.
	> Used to redistribute information to/from other routing domains and OSPF


OSPF LSA Types
- With different router types in the OSPF domain, different types of advertisements are required
	> eg. DR, ABR, ASBR, etc
- Different LSA formats used to represent this information
	> Format is defined by type code
	> Type 1, type 2, etc
- LSA Types are 
	> Type 1 - Router LSA
		- Generated by every router in the OSPF domain
		- Not flooded outside the area they originate in
		- Describes its directly connected links
			> What are my link costs
			> Who are my neighbors
		- Used to build the grapf for intra-area SPF
	> Type 2 - Network LSA
		- Generated by Designated Router (DR) on broadcast and non-broadcast network types
		- Not flooded outside the area they originate in
    - Describes who is adjacent with the DR
      > what is my link cost to the DR
      > Implies my link cost to all others adjacent to that DR
    - Used to reduce redundant information in the database
      > (n*(n-1)/2) and flooding scalability issue
	> Type 3 - Network Summary LSA
    - Generated by ABR
    - Flooded from area 0 into non-backbone areas and vice-versa
    - Describes ABRs reachability to link in other areas
      > includes cost, but hides ABR's actual path to destination
    - SPF not run for ABR advertised routes
      > ABR can reach link A via SPT in cost X
      > I can reach ABR via SPT in cost Y
      > Implies I can reach link A via SPT in cost X+Y
    - This is why inter-area routing is like distance vector
	> Type 4 - ASBR Summary LSA
    - Generated by ABR
    - Flooded from area 0 into non-backbone areas and vice-versa
    - Describes ABR's reachability into ASBRs in other areas
      > includes cost, but hides ABR's actual path to destination
    - SPF not run for ABR advertised routes
      > ABR can reach ASBR via SPT in cost X
      > I can reach ABR via SPT in cost Y
      > Implies I can reach ASBR via SPT in cost X+Y
    - Inter-area external routing is also like distance vector
	> Type 5 - External LSA
    - Generated by ASBR
    - Flooded to all non-stub areas (all OSPF devices except for stub areas)
    - Describes routes ASBR is redistributing
      > Metric
      > Metric Type (notes below)
        - Type 1 = E1
        - Type 2 = E2 (default)
      > Forward Address (functions like BGP route reflector)
        - Who should I route towards to reach the link
        - Usually the ASBR itself, but could be someone else in some designs
      > Route Tag
	> Type 6 - Multicast LSA
		- MOSPF - not implemented by most vendors (abandoned protocol)
	> Type 7 - NSSA External LSA (Not So Stubby Area)
	> Type 8, 9, 10 - Opaque LSA
		- Used for extensibility
		- eg. MPLS Traffic Engineering


LSAs and Route Types
- LSAs are grouped together by 3 route types
- Intra-Area Routes (O)
	> LSA Types 1 and 2
- Inter-Area Routes (O IA)
	> LSA Types 3 and 4
- External Routes
	> E1/E2
		- LSA Type 5
	> N1/N2
		- LSA Type 7
    
OSPF External Type 1 vs Type 2
- External route type controls how metric for external link is calculated
- Type 1 (E1)
  > Take the cost the ASBR reports in plus the cost to the ASBR
- Type 2 (E2)
  > Take just the cost the ASBR reports in
  > If there is a tie, then take the cost to the ASBR as well
- Type 1 is preferred over Type 2
- Hot potato (Route traffic as quickly as possible) vs Cold Potato (most accurate route) routing


OSPF External Route Calculation


21:00





















======================================================================
OSPF Media Dependencies & Network Types
======================================================================
Configuring OSPF Network Types
======================================================================
OSPF Virtual Links
======================================================================
OSPF Stub Areas
======================================================================
Configuring OSPF Stub Areas
======================================================================
Traffic Engineering with OSPF Stub Areas
======================================================================
Configuring OSPF Not So Stubby Areas (NSSA)
======================================================================
Controlling NSSA Redistribution
======================================================================
Default Routing with OSPF NSSA
======================================================================
OSPF NSSA Translator Election & Forwarding Address

======================================================================
OSPF Path Selection

======================================================================
OSPF Authentication

======================================================================
OSPF Authentication Enhancements

======================================================================
OSPF Summarization Overview

======================================================================
Configuring OSPF Summarization
======================================================================
OSPF Route Filtering
======================================================================
Sample
---------------------------------------------------------------
gs89e01#show ospf interface brief

* Indicates MADJ interface, (P) Indicates fast detect hold down state

Interfaces for OSPF 10

Interface          PID   Area            IP Address/Mask    Cost  State Nbrs F/C
Lo1                10    0               166.105.224.54/32  1     LOOP  0/0
Hu0/0/0/0          10    0               10.0.1.93/30       4021  P2P   1/1
Hu0/7/0/0          10    0               10.0.1.89/30       5     P2P   1/1

gs89e01#show ospf neighbor

* Indicates MADJ interface
# Indicates Neighbor awaiting BFD session up

Neighbors for OSPF 10

Neighbor ID     Pri   State           Dead Time   Address         Interface
166.105.224.133 128   FULL/  -        00:00:38    10.0.1.94       HundredGigE0/0/0/0    Neighbor is up for 1w6d <------------ shortest path to reach the NODE 166.105.224.133, NOT THE ROUTE 166.105.224.133
166.105.224.127 1     FULL/  -        00:00:39    10.0.1.90       HundredGigE0/7/0/0    Neighbor is up for 26w6d

Total neighbor count: 2


gs89e01#show route ospf <------------------output below is snipped

O    10.0.0.0/30 [110/16856] via 10.0.1.94, 1w5d, HundredGigE0/0/0/0 <--------------------- 110 = Admin Distance; Cost = 16856; O = OSPF same area
-snipped-

gs89e01#show ospf database <------------------output below is snipped


            OSPF Router with ID (166.105.224.54) (Process ID 10)

		Router Link States (Area 0) <-----------------------------LSA1 Router LSA

Link ID         ADV Router      Age         Seq#       Checksum Link count
159.24.196.45   159.24.196.45   951         0x80016837 0x0019a9 5
159.24.196.46   159.24.196.46   1169        0x80008395 0x00f026 5
159.24.196.49   159.24.196.49   774         0x8001c18f 0x000cec 5
159.24.196.50   159.24.196.50   251         0x800049ed 0x0067bd 5
159.24.196.51   159.24.196.51   475         0x8001c729 0x004a2d 5
159.24.196.52   159.24.196.52   199         0x8001c1c5 0x00038e 5
159.24.196.53   159.24.196.53   337         0x8001c01e 0x00c8e5 5
166.105.224.133 166.105.224.133 1869        0x80010afa 0x00cc91 39
-snipped-

		Net Link States (Area 0) <-----------------------------LSA2 Network LSA

Link ID         ADV Router      Age         Seq#       Checksum
10.0.1.190      166.61.1.76     617         0x80000652 0x00563e
10.0.5.73       166.105.224.40  2428        0x800006c6 0x003f7a
10.0.7.166      166.105.248.8   412         0x80004d5d 0x008029
10.0.8.178      166.105.248.6   505         0x80003ad4 0x00231b
10.0.10.98      166.105.224.51  2214        0x80004de4 0x009a8f
10.0.10.193     166.61.0.168    621         0x80000581 0x005114
10.0.10.197     166.61.0.168    2358        0x800023dc 0x0004c0
10.0.10.201     166.61.0.168    843         0x80000d17 0x00e7d4
10.0.10.206     166.61.0.235    368         0x8000014c 0x00924f
10.0.11.33      166.105.241.65  838         0x800002e4 0x007d1b
-snipped-

gs89e01#show ospf database router 166.105.224.133


            OSPF Router with ID (166.105.224.54) (Process ID 10)

		Router Link States (Area 0)

  Routing Bit Set on this LSA
  LS age: 244
  Options: (No TOS-capability, DC)
  LS Type: Router Links
  Link State ID: 166.105.224.133
  Advertising Router: 166.105.224.133
  LS Seq Number: 80010afb
  Checksum: 0xca92
  Length: 492
  AS Boundary Router
   Number of Links: 39 <------------------- Number of links/interfaces on the router running OSPF

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.59
     (Link Data) Router Interface address: 10.0.21.138
      Number of TOS metrics: 0
       TOS 0 Metrics: 5

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.21.136
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 5

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.104
     (Link Data) Router Interface address: 10.0.0.238
      Number of TOS metrics: 0
       TOS 0 Metrics: 4001

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.0.236
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4001

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.229.232
     (Link Data) Router Interface address: 10.0.4.54
      Number of TOS metrics: 0
       TOS 0 Metrics: 65500

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.4.52
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 65500

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.229.237
     (Link Data) Router Interface address: 10.0.4.58
      Number of TOS metrics: 0
       TOS 0 Metrics: 4034

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.4.56
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4034

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.108
     (Link Data) Router Interface address: 10.0.0.250
      Number of TOS metrics: 0
       TOS 0 Metrics: 4001

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.0.248
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4001

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.229.230
     (Link Data) Router Interface address: 10.0.24.134
      Number of TOS metrics: 0
       TOS 0 Metrics: 4014

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.24.132
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4014

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.61
     (Link Data) Router Interface address: 10.0.10.253
      Number of TOS metrics: 0
       TOS 0 Metrics: 8300

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.10.252
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 8300

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.61.0.145
     (Link Data) Router Interface address: 10.0.12.58
      Number of TOS metrics: 0
       TOS 0 Metrics: 625

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.12.56
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 625

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.81
     (Link Data) Router Interface address: 10.0.3.206
      Number of TOS metrics: 0
       TOS 0 Metrics: 1850

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.204
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 1850

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.59
     (Link Data) Router Interface address: 10.0.3.210
      Number of TOS metrics: 0
       TOS 0 Metrics: 7

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.208
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 7

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.58
     (Link Data) Router Interface address: 10.0.3.221
      Number of TOS metrics: 0
       TOS 0 Metrics: 6900

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.220
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 6900

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.95
     (Link Data) Router Interface address: 10.0.3.230
      Number of TOS metrics: 0
       TOS 0 Metrics: 1975

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.228
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 1975

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.77
     (Link Data) Router Interface address: 10.0.3.238
      Number of TOS metrics: 0
       TOS 0 Metrics: 4100

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.236
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4100

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.93
     (Link Data) Router Interface address: 10.0.3.245
      Number of TOS metrics: 0
       TOS 0 Metrics: 550

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.244
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 550

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.75
     (Link Data) Router Interface address: 10.0.3.253
      Number of TOS metrics: 0
       TOS 0 Metrics: 825

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.3.252
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 825

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.87
     (Link Data) Router Interface address: 10.0.4.5
      Number of TOS metrics: 0
       TOS 0 Metrics: 6100

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.4.4
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 6100

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.230.42
     (Link Data) Router Interface address: 10.2.160.50
      Number of TOS metrics: 0
       TOS 0 Metrics: 4269

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.2.160.48
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4269

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.93
     (Link Data) Router Interface address: 10.0.21.145
      Number of TOS metrics: 0
       TOS 0 Metrics: 550

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.21.144
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 550

    Link connected to: another Router (point-to-point)
     (Link ID) Neighboring Router ID: 166.105.224.54
     (Link Data) Router Interface address: 10.0.1.94
      Number of TOS metrics: 0
       TOS 0 Metrics: 4021

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 10.0.1.92
     (Link Data) Network Mask: 255.255.255.252
      Number of TOS metrics: 0
       TOS 0 Metrics: 4021

    Link connected to: a Stub Network
     (Link ID) Network/subnet number: 166.105.224.133
     (Link Data) Network Mask: 255.255.255.255
      Number of TOS metrics: 0
       TOS 0 Metrics: 0
       
gs89e01#show run formal | inc "HundredGigE0/0/0/0|ospf"
Building configuration...
taskgroup priv1 task read ospf
interface HundredGigE0/0/0/0 description **TRK** GS89E01 HundredGigE0/0/0/0 to NV85P02 et-7/0/1.0 BW: 100G CKT: XE#1A#080001 NET: PIP ID: pipdd721 ###
interface HundredGigE0/0/0/0 
interface HundredGigE0/0/0/0 mtu 9216
interface HundredGigE0/0/0/0 service-policy input PE-P_Mark
interface HundredGigE0/0/0/0 service-policy output DSCP_PCR_PE-P_100000000K
interface HundredGigE0/0/0/0 ipv4 address 10.0.1.93 255.255.255.252
interface HundredGigE0/0/0/0 ipv4 unreachables disable
interface HundredGigE0/0/0/0 carrier-delay up 10000 down 60
interface HundredGigE0/0/0/0 dampening 1 1000 1500 4
router ospf 10 nsr
router ospf 10 log adjacency changes
router ospf 10 router-id 166.105.224.54
router ospf 10 mpls ldp sync
router ospf 10 fast-reroute per-prefix
router ospf 10 maximum paths 1
router ospf 10 timers throttle lsa all 50 200 1000
router ospf 10 timers throttle spf 100 200 1000
router ospf 10 timers lsa min-arrival 100
router ospf 10 timers pacing flood 10
router ospf 10 area 0 
router ospf 10 area 0 mpls traffic-eng
router ospf 10 area 0 interface Loopback1 
router ospf 10 area 0 interface Loopback1 passive enable
router ospf 10 area 0 interface HundredGigE0/0/0/0 
router ospf 10 area 0 interface HundredGigE0/0/0/0 bfd minimum-interval 300
router ospf 10 area 0 interface HundredGigE0/0/0/0 bfd fast-detect
router ospf 10 area 0 interface HundredGigE0/0/0/0 bfd multiplier 3
router ospf 10 area 0 interface HundredGigE0/0/0/0 cost 4021
router ospf 10 area 0 interface HundredGigE0/0/0/0 authentication message-digest
router ospf 10 area 0 interface HundredGigE0/0/0/0 message-digest-key 1 md5 encrypted 133607131918242438202C646773
router ospf 10 area 0 interface HundredGigE0/0/0/0 network point-to-point
router ospf 10 area 0 interface HundredGigE0/7/0/0 
router ospf 10 area 0 interface HundredGigE0/7/0/0 bfd minimum-interval 300
router ospf 10 area 0 interface HundredGigE0/7/0/0 bfd fast-detect
router ospf 10 area 0 interface HundredGigE0/7/0/0 bfd multiplier 3
router ospf 10 area 0 interface HundredGigE0/7/0/0 cost 5
router ospf 10 area 0 interface HundredGigE0/7/0/0 authentication message-digest
router ospf 10 area 0 interface HundredGigE0/7/0/0 message-digest-key 1 md5 encrypted 06351F205E5A29171613165C5E54
router ospf 10 area 0 interface HundredGigE0/7/0/0 network point-to-point
router ospf 10 mpls traffic-eng router-id Loopback1
router ospf 10 
rsvp interface HundredGigE0/0/0/0 
rsvp interface HundredGigE0/0/0/0 bandwidth percentage 40
mpls traffic-eng interface HundredGigE0/0/0/0 
mpls traffic-eng interface HundredGigE0/0/0/0 admin-weight 651100
mpls traffic-eng interface HundredGigE0/0/0/0 auto-tunnel backup 
mpls traffic-eng interface HundredGigE0/0/0/0 auto-tunnel backup exclude srlg preferred
mpls ldp interface HundredGigE0/0/0/0 
multicast-routing address-family ipv4 interface HundredGigE0/0/0/0 
multicast-routing address-family ipv4 interface HundredGigE0/0/0/0 enable
router igmp interface HundredGigE0/0/0/0 
router igmp interface HundredGigE0/0/0/0 version 2

---------------------------------------------------------------
